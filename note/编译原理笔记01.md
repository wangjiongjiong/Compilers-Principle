# 编译原理笔记

## 第一章 引论

什么是编译器，编译器就是一个程序，它可以阅读某一种语言(某种高级编程语言)编写的程序，并且把这个程序翻译成为一个等价的、用另一种语言(目标语言)通常情况下会是汇编语言，同时编译器还需要找出在翻译过程中的错误。

解释器与编译器相对，解释器不会将程序翻译生成一个目标程序，通常解释器直接利用用户的输入进行执行。

同时大型程序的编译过程是非常复杂的。

![image-20231129155146428](C:\Users\29847\AppData\Roaming\Typora\typora-user-images\image-20231129155146428.png)

### 编译器的结构

龙书将编译器由两个部分组成，一个是分析部分，一个是综合部分。

分析部分把源程序分解为许多个组成要素，并且在要素之上加上语法结构。最后我们会得到一个源程序的中间表示。分析这部分会检查源程序的语法结构是否由问题，同时分析部分也会收集一些源程序的信息，并且把信息放在一个叫符号表的数据结构中，最后我们会将符号表和中间表示一起给综合部分。

综合部分，就是将分析部分生成的中间表示和符号表利用这两个信息来生成我们想要的目标程序。

往往我们对编译器的分析部分称为前端，对综合部分称为后端。

![image-20231129155911165](C:\Users\29847\AppData\Roaming\Typora\typora-user-images\image-20231129155911165.png)

一个典型的编译过程会执行一系列顺序的步骤，但是有一些优化步骤是可以省略的，因为优化在编译过程中就是可选的。

### 词法分析

`词法分析`是编译器的第一个步骤，也可以叫做`扫描`。他的输入是`字符流`，并且将他们组成为有意义的`词素(lexeme)`的序列，对于每个`词素`,词法分析器会产生`词法单元(token)`作为输出![image-20231129160535818](C:\Users\29847\AppData\Roaming\Typora\typora-user-images\image-20231129160535818.png)第一个分量是抽象符号，第二个分量是指向符号表关于这个`token`的条目。

### 语法分析

`语法分析`是编译器的第二个步骤也被称为`解析`。语法分析器会使用词法分析器生成的各个`token`的第一个分量也就是那个抽象符号来构建一个树形的中间表示，通常情况下表示方法是`语法树`，这个树中每个内部节点表示一个运算，该节点的子节点表示为运算的分量。

### 语义分析

语义分析器使用语法树和符号表中的信息来检查源程序和语言定义的语义是否一致。语义分析中一个重要的部分是`类型检查`，编译器会检查每个运算符是否具有匹配的运算分量。

### 中间代码生成

在编译的过程中，一个编译器可以生成一个或者多个中间表示。其中语法树只是一种，通常在语法分析和语义分析中使用。在语法分析和语义分析之后编译器基本会生成出来低级或者类机器语言的中间表示。，这个中间表示应该是易于被生产的，并且能够轻松地被翻译为目标机器上的语言。后面会学习一种表示形式是`三地址表示形式`。

### 代码优化

顾名思义，机器无关的代码优化就是针对中间代码进行优化改进，这个在后面的章节会详细介绍。

### 代码生成

代码生成器以中间表示作为输入，并将它映射到目标语言中，同时代码生成中一个至关重要的方面就是合理分配寄存器用来存放变量的值。

### 符号表管理

符号表在前面已经介绍过了，主要存放的内容就是在编译过程中源程序中已经使用的变量名字，符号表会为每一个变量名字创建一个记录条目，这个符号表是允许编译器可以快速定位的，并向记录中快速添加记录。

### 将多个步骤合成为趟

例如在前端的部分中词法分析、语法分析、语义分析、中间代码的生成这些就可以组合在一起成为一个趟，而后端就可以作为一个单独的趟，同时代码优化部分是一个可选择的趟。当然有些编译器就会对于不同的前端与后端进行组合，他们重点在于精心设计一个中间表示，使得可以组合不同的前端与某些特定的目标机后端进行组合，这样就可以对不同的源语言建立目标机的编译器。



